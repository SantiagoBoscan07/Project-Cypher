[gd_scene load_steps=2 format=3 uid="uid://d3c6m42lou5ci"]

[sub_resource type="GDScript" id="GDScript_owp3k"]
script/source = "extends Node2D
class_name Spawner
@export var bullethell: PackedScene
@export_range(0,2*PI) var alpha: float = 0.0
@export var bulletspawner: Marker2D
@export var power_timer: Timer
@export var durationTimer: Timer
@export var player: CharacterBody2D
var canStorm: bool = true
var theta: float = 0.0
var speed = 100
var direction = Vector2.RIGHT

func _ready():
	Signals.connect(\"startStorm\", timer)

func get_vector(angle):
	theta = angle + alpha
	return Vector2(cos(theta), sin(theta))

func start_storm(angle):
	var bullethell = bullethell.instantiate()
	bullethell.position = bulletspawner.global_position
	bullethell.z_index = player.z_index - 1
	bullethell.direction = get_vector(angle)
	get_tree().current_scene.call_deferred(\"add_child\", bullethell)

func _on_bullet_storm_duration_timeout():
	power_timer.stop()

func timer():
	power_timer.start()
	durationTimer.start()
	start_storm(theta)

func _on_bullet_storm_cooldown_timeout():
	start_storm(theta)
"

[node name="ProjectileSpawner" type="Node2D"]
position = Vector2(28, 28)
script = SubResource("GDScript_owp3k")
alpha = 1.0
